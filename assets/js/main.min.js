document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".header"),t=document.querySelector(".header-menu-toggle"),o=document.querySelector(".header-menu"),n=document.querySelectorAll(".header-menu__item--submenu");function c(){o.classList.contains("header-menu--active")&&(o.style.height=`${o.scrollHeight}px`)}e&&t&&o&&window.matchMedia("(max-width: 1199.98px)").matches&&(t.addEventListener("click",(function(){if(this.classList.toggle("header-menu-toggle--active"),e.classList.toggle("header--active"),o.classList.contains("header-menu--active"))o.style.height=`${o.scrollHeight}px`,requestAnimationFrame((()=>{o.style.height="0px",o.classList.remove("header-menu--active")}));else{o.classList.add("header-menu--active");const e=o.scrollHeight;o.style.height="0px",requestAnimationFrame((()=>{o.style.height=`${e}px`}))}})),n.forEach((e=>{e.addEventListener("click",(function(t){if(!t.target.closest(".submenu__link")&&window.innerWidth<1200){t.preventDefault();const o=e.querySelector(".header-menu__submenu");if(!o)return;e.classList.toggle("active"),function(e){if(e.classList.contains("active"))e.style.height=`${e.scrollHeight}px`,requestAnimationFrame((()=>{e.style.height="0px",e.classList.remove("active")}));else{e.classList.add("active");const t=e.scrollHeight;e.style.height="0px",requestAnimationFrame((()=>{e.style.height=`${t}px`}))}}(o),setTimeout(c,250)}}))})));if(window.matchMedia("(hover: hover)").matches){document.querySelectorAll(".about-info__head").forEach((e=>{e.addEventListener("mouseenter",(()=>{const t=e.closest(".about-info__item");t&&t.classList.add("about-info__item--hovered")})),e.addEventListener("mouseleave",(()=>{const t=e.closest(".about-info__item");t&&t.classList.remove("about-info__item--hovered")}))}))}function a(){document.querySelectorAll(".job-accordeon").forEach((e=>{e.querySelectorAll(".job-accordeon__item").forEach(((e,t)=>{const o=e.querySelector(".job-accordeon__btn"),n=e.querySelector(".job-accordeon__content");0===t?(e.classList.add("open"),n.style.maxHeight=n.scrollHeight+"px"):n.style.maxHeight=0,o.addEventListener("click",(()=>{e.classList.contains("open")?(e.classList.remove("open"),n.style.maxHeight=0):(e.classList.add("open"),n.style.maxHeight=n.scrollHeight+"px")}))}))}))}document.querySelectorAll("[data-tabs-container]").forEach((e=>{const t=e.dataset.tabsDefault,o=e.querySelectorAll(".tabs__btn"),n=e.querySelectorAll(".tabs__content");if(0===o.length||0===n.length)return;const c=t||o[0].dataset.tab;function a(e){n.forEach((t=>{t.classList.toggle("active",t.dataset.tab===e)})),o.forEach((t=>{t.classList.toggle("active",t.dataset.tab===e)}))}o.forEach((e=>{e.addEventListener("click",(()=>{a(e.dataset.tab)}))})),a(c)})),a();document.querySelectorAll(".catalog-card").forEach((e=>{const t=e.querySelector(".catalog-card__content"),o=e.querySelector(".catalog-card__cta");if(t&&o){const e=()=>{const e=t.getBoundingClientRect().height;o.style.bottom=`${e}px`};e();new ResizeObserver(e).observe(t)}}));new Swiper(".page-job__slider",{slidesPerView:1.3,spaceBetween:8,breakpoints:{576:{slidesPerView:2},768:{slidesPerView:3},1200:{slidesPerView:4,spaceBetween:24}},loop:!1,navigation:{nextEl:".page-job__nav--next",prevEl:".page-job__nav--prev"},a11y:{prevSlideMessage:"Предыдущая вакансия",nextSlideMessage:"Следующая вакансия"},speed:1400,autoHeight:!1});let i=null;const s=GLightbox({elements:[{content:document.getElementById("contact-form")}],width:"600px",height:"auto"});document.querySelectorAll('[data-form="true"]').forEach((e=>{e.addEventListener("click",(function(){i=e,s.open()}))})),s.on("open",(()=>{setTimeout((()=>{const e=document.querySelector("#contact-form .wpcf7 form");if(!e||!i)return;const t=document.title,o=i.getAttribute("data-title")||"",n=i.getAttribute("data-info")||"",c=e.querySelector('input[name="page_title"]'),a=e.querySelector('input[name="product_info"]');c&&(c.value=t),a&&(a.value=o&&n?`${o} – ${n}`:o||n||"Не указано")}),100)}));let r=document.querySelectorAll('[data-resume="true"]');for(let e=0;e<r.length;e++)r[e].addEventListener("click",(function(){d.open()}));GLightbox({touchNavigation:!0,loop:!1,autoplayVideos:!1,height:"auto"});const l=GLightbox({selector:".glightbox-job",touchNavigation:!0,loop:!1,height:"auto"});l.on("slide_after_load",(e=>{const{slideNode:t}=e;a();const o=t.querySelector('[data-job-form="true"]');o&&o.addEventListener("click",(function(e){e.preventDefault(),l.close(),setTimeout((()=>{d.open()}),800)}))}));const d=GLightbox({elements:[{content:document.getElementById("job-form")}],width:"870",loop:!1,height:"auto"}),u=document.getElementById("file1"),h=document.querySelector(".resume-upload-text");u&&h&&u.addEventListener("change",(function(){if(u.files.length>0){const e=u.files[0].name;h.textContent=`Файл "${e}" прикреплён`}else h.textContent="Добавьте ваше резюме"}));const m=document.querySelector(".page-catalog__filters-btn"),g=document.querySelector(".page-catalog__filters-form");if(m&&g){const e=m.querySelector(".page-catalog__filters-btn-text");let t=!1;m.addEventListener("click",(()=>{if(t)g.style.height=g.scrollHeight+"px",requestAnimationFrame((()=>{g.style.height="0"})),g.classList.remove("open"),m.classList.remove("active"),e.textContent="Показать фильтры";else{const t=g.scrollHeight+"px";g.style.height=t,g.classList.add("open"),m.classList.add("active"),e.textContent="Скрыть фильтры"}t=!t})),g.addEventListener("transitionend",(()=>{t&&(g.style.height="auto")}))}document.body.appendChild(document.getElementById("cookie-notification"));const f=document.getElementById("cookie-notification"),y=document.getElementById("cookie-accept");(function(e){const t=e+"=",o=decodeURIComponent(document.cookie).split(";");for(let e=0;e<o.length;e++){let n=o[e];for(;" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(t))return n.substring(t.length,n.length)}return""})("cookieAccepted")||(f.style.display="block"),y.addEventListener("click",(function(){!function(e,t,o){const n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3);const c="expires="+n.toUTCString();document.cookie=e+"="+t+";"+c+";path=/"}("cookieAccepted","true",365),f.style.display="none"}));document.querySelectorAll(".about-info__item").forEach((e=>{const t=e.querySelector(".about-info__head"),o=e.querySelector(".about-info__content");e.classList.contains("about-info__item--active")&&(o.style.maxHeight=o.scrollHeight+"px"),t.addEventListener("click",(function(){e.classList.contains("about-info__item--active")?(e.classList.remove("about-info__item--active"),o.style.maxHeight="0px"):(e.classList.add("about-info__item--active"),o.style.maxHeight=o.scrollHeight+"px")}))}))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("ajax-posts"),t=document.querySelector(".pagination");let o=1,n=null;function c(){o++,fetch(ajaxData.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"load_more_posts",page:o,category_id:n})}).then((e=>e.text())).then((o=>{const n=(new DOMParser).parseFromString(o,"text/html"),a=n.querySelector(".ajax-cards"),i=n.querySelector(".ajax-load-more");a&&e.insertAdjacentHTML("beforeend",a.innerHTML);const s=document.getElementById("load-more");if(s&&s.remove(),i){const e=i.querySelector("#load-more");e&&(t.appendChild(e),e.addEventListener("click",c))}}))}const a=document.getElementById("load-more");a&&a.addEventListener("click",c),document.querySelectorAll(".category-filter__btn").forEach((a=>{a.addEventListener("click",(function(){n=this.dataset.cat,o=1,fetch(ajaxData.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"filter_posts_by_category",category_id:n})}).then((e=>e.text())).then((o=>{const n=(new DOMParser).parseFromString(o,"text/html"),a=n.querySelector(".ajax-cards"),i=n.querySelector(".ajax-load-more");e.innerHTML=a?a.innerHTML:"";const s=document.getElementById("load-more");if(s&&s.remove(),i){const e=i.querySelector("#load-more");e&&(t.appendChild(e),e.addEventListener("click",c))}document.querySelectorAll(".category-filter__btn").forEach((e=>e.classList.remove("active"))),this.classList.add("active")}))}))}));const i=document.querySelector(".single-archive__show-cat"),s=document.querySelector(".single-archive__filter");if(i&&s){let e=!1;i.addEventListener("click",(function(){e?(s.style.height=s.scrollHeight+"px",requestAnimationFrame((()=>{s.style.height="0px"})),i.textContent="Показать категории"):(s.style.height=s.scrollHeight+"px",i.textContent="Скрыть категории"),e=!e})),window.addEventListener("resize",(function(){window.innerWidth>1200&&(s.style.height="",e=!1,i.textContent="Показать категории")}))}}));